(this["webpackJsonplearn-react"]=this["webpackJsonplearn-react"]||[]).push([[0],{24:function(e,t,n){},31:function(e,t,n){"use strict";n.r(t);var s=n(16),r=n.n(s),o=(n(24),n(11)),a=n(0),c=n.n(a),i=n(2),l=n(19),j=n(10),u=n(7),b={username:"",isLogin:!1},d=localStorage.getItem("session");d&&(b=JSON.parse(d));var O={session:b,setSession:function(){}},g=c.a.createContext(O),m=n(1);function p(e,t){switch(t.type){case"INPUT":return Object(u.a)(Object(u.a)({},e),{},Object(j.a)({},t.name,t.value));case"LOGIN":return Object(u.a)(Object(u.a)({},e),{},{loading:!0,error:""});case"ERROR":return Object(u.a)(Object(u.a)({},e),{},{error:"Incorrect Username or Password",loading:!1});case"SUCCESS":return Object(u.a)(Object(u.a)({},e),{},{loading:!1,isLoggedIn:!0,error:""});case"LOGOUT":return Object(u.a)(Object(u.a)({},e),{},{isLoggedIn:!1,username:"",password:""});default:return e}}var h=[{path:"/login",component:function(e){var t=Object(a.useContext)(g).setSession;console.log(Object(a.useContext)(g));var n=Object(a.useReducer)(p,{loading:!1,username:"",password:"",error:"",isLoggedIn:!1}),s=Object(o.a)(n,2),r=s[0],c=s[1],i=function(e){var t=e.target,n=t.name,s=t.value;c({type:"INPUT",name:n,value:s})};return Object(m.jsx)(m.Fragment,{children:r.isLoggedIn?Object(m.jsx)(m.Fragment,{children:Object(m.jsx)("button",{type:"button",onClick:function(){c({type:"LOGOUT"})},children:"Logout"})}):Object(m.jsxs)("fieldset",{style:{width:400},children:[Object(m.jsx)("legend",{children:"Login"}),Object(m.jsxs)("form",{onSubmit:function(n){n.preventDefault(),c({type:"LOGIN"}),setTimeout((function(){if("budi"===r.username&&"123"===r.password){c({type:"SUCCESS"});var n={username:"budi",isLogin:!0,loginTime:new Date};t(n),localStorage.setItem("session",JSON.stringify(n)),e.history.push("/home")}else c({type:"ERROR"})}),2e3)},children:[Object(m.jsx)("input",{type:"text",placeholder:"Username",name:"username",value:r.username,onChange:i}),Object(m.jsx)("input",{type:"password",placeholder:"Password",name:"password",value:r.password,onChange:i}),Object(m.jsx)("i",{style:{color:"#666"},children:"Demo: username: budi , password: 123"}),Object(m.jsx)("br",{}),r.error&&Object(m.jsx)("span",{style:{color:"red"},children:r.error}),Object(m.jsx)("br",{}),Object(m.jsx)("button",{children:r.loading?"Loading":"Login"})]})]})})}},{path:"/home",component:function(e){var t=Object(a.useContext)(g),n=t.session,s=t.setSession;return Object(m.jsxs)("fieldset",{style:{width:400},children:[Object(m.jsxs)("legend",{children:["Welcome, ",n.username]}),Object(m.jsx)("button",{onClick:function(){s({username:"",isLogin:!1}),localStorage.removeItem("session"),e.history.push("/login")},children:"Logout"})]})}}],x=function(){var e=Object(i.g)(),t=Object(a.useContext)(g),n=Object(a.useState)(t.session),s=Object(o.a)(n,2),r=s[0],j=s[1];return Object(m.jsxs)(c.a.Fragment,{children:[Object(m.jsx)("blockquote",{children:Object(m.jsxs)("pre",{children:["Global State => ",JSON.stringify(r,null,2)]})}),Object(m.jsx)(g.Provider,{value:{session:r,setSession:j},children:Object(m.jsx)(l.a,{history:e,basename:"/ReactJS-Global-State",children:Object(m.jsxs)(i.d,{children:[h.map((function(e){return Object(m.jsx)(i.b,{path:e.path,component:e.component},e.path)})),Object(m.jsx)(i.a,{from:"/",to:"/login"})]})})})]})};r.a.render(Object(m.jsx)(x,{}),document.getElementById("root"))}},[[31,1,2]]]);
//# sourceMappingURL=main.a1287183.chunk.js.map