(this["webpackJsonplearn-react"]=this["webpackJsonplearn-react"]||[]).push([[0],{24:function(e,t,n){},31:function(e,t,n){"use strict";n.r(t);var s=n(16),r=n.n(s),o=(n(24),n(11)),c=n(0),a=n.n(c),i=n(17),j=n(2),l=n(10),u=n(7),b={username:"",isLogin:!1},d=localStorage.getItem("session");d&&(b=JSON.parse(d));var O={session:b,setSession:function(){}},g=a.a.createContext(O),p=n(1);function m(e,t){switch(t.type){case"INPUT":return Object(u.a)(Object(u.a)({},e),{},Object(l.a)({},t.name,t.value));case"LOGIN":return Object(u.a)(Object(u.a)({},e),{},{loading:!0,error:""});case"ERROR":return Object(u.a)(Object(u.a)({},e),{},{error:"Incorrect Username or Password",loading:!1});case"SUCCESS":return Object(u.a)(Object(u.a)({},e),{},{loading:!1,isLoggedIn:!0,error:""});case"LOGOUT":return Object(u.a)(Object(u.a)({},e),{},{isLoggedIn:!1,username:"",password:""});default:return e}}var h=[{path:"/login",component:function(e){var t=Object(c.useContext)(g).setSession;console.log(Object(c.useContext)(g));var n=Object(c.useReducer)(m,{loading:!1,username:"",password:"",error:"",isLoggedIn:!1}),s=Object(o.a)(n,2),r=s[0],a=s[1],i=function(e){var t=e.target,n=t.name,s=t.value;a({type:"INPUT",name:n,value:s})};return Object(p.jsx)(p.Fragment,{children:r.isLoggedIn?Object(p.jsx)(p.Fragment,{children:Object(p.jsx)("button",{type:"button",onClick:function(){a({type:"LOGOUT"})},children:"Logout"})}):Object(p.jsxs)("fieldset",{style:{width:400},children:[Object(p.jsx)("legend",{children:"Login"}),Object(p.jsxs)("form",{onSubmit:function(n){n.preventDefault(),a({type:"LOGIN"}),setTimeout((function(){if("budi"===r.username&&"123"===r.password){a({type:"SUCCESS"});var n={username:"budi",isLogin:!0,loginTime:new Date};t(n),localStorage.setItem("session",JSON.stringify(n)),e.history.push("/home")}else a({type:"ERROR"})}),2e3)},children:[Object(p.jsx)("input",{type:"text",placeholder:"Username",name:"username",value:r.username,onChange:i}),Object(p.jsx)("input",{type:"password",placeholder:"Password",name:"password",value:r.password,onChange:i}),Object(p.jsx)("i",{style:{color:"#666"},children:"Demo: username: budi , password: 123"}),Object(p.jsx)("br",{}),r.error&&Object(p.jsx)("span",{style:{color:"red"},children:r.error}),Object(p.jsx)("br",{}),Object(p.jsx)("button",{children:r.loading?"Loading":"Login"})]})]})})}},{path:"/home",component:function(e){var t=Object(c.useContext)(g),n=t.session,s=t.setSession;return Object(p.jsxs)("fieldset",{style:{width:400},children:[Object(p.jsxs)("legend",{children:["Welcome, ",n.username]}),Object(p.jsx)("button",{onClick:function(){s({username:"",isLogin:!1}),localStorage.removeItem("session"),e.history.push("/login")},children:"Logout"})]})}}],x=function(){var e=Object(c.useContext)(g),t=Object(c.useState)(e.session),n=Object(o.a)(t,2),s=n[0],r=n[1];return Object(p.jsxs)(a.a.Fragment,{children:[Object(p.jsx)("blockquote",{children:Object(p.jsxs)("pre",{children:["Global State => ",JSON.stringify(s,null,2)]})}),Object(p.jsx)(g.Provider,{value:{session:s,setSession:r},children:Object(p.jsx)(i.a,{children:Object(p.jsxs)(j.d,{children:[h.map((function(e){return Object(p.jsx)(j.b,{path:e.path,component:e.component},e.path)})),Object(p.jsx)(j.a,{from:"/",to:"/login"})]})})})]})};r.a.render(Object(p.jsx)(x,{}),document.getElementById("root"))}},[[31,1,2]]]);
//# sourceMappingURL=main.cde7e44c.chunk.js.map